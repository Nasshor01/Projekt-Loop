[gd_scene load_steps=9 format=3 uid="uid://drcylmyjefmn0"]

[ext_resource type="Script" uid="uid://d3ytuwmimqlg4" path="res://scenes/battle/BattleScene.gd" id="1_vd1me"]
[ext_resource type="Resource" uid="uid://d118t8olbc47a" path="res://data/encounters/first_battle.tres" id="2_q8wks"]
[ext_resource type="PackedScene" uid="uid://cheykuupki7w3" path="res://scenes/battle/BattleGrid.tscn" id="2_t3o3d"]
[ext_resource type="PackedScene" uid="uid://dvvvw8dvuaf0n" path="res://scenes/ui/PlayerHandUI.tscn" id="3_rjp4h"]
[ext_resource type="PackedScene" uid="uid://bykx7qci4fkvl" path="res://scenes/battle/UnitInfoPanel.tscn" id="4_t3o3d"]
[ext_resource type="PackedScene" uid="uid://csfa8idl8266g" path="res://scenes/ui/DeckPileUI.tscn" id="5_nabc4"]
[ext_resource type="PackedScene" uid="uid://b5ybgxi0pnlk7" path="res://scenes/ui/CardPileViewer.tscn" id="6_q8wks"]
[ext_resource type="PackedScene" uid="uid://ckvi6eu1vd02a" path="res://scenes/ui/DevConsole.tscn" id="8_5282s"]
[ext_resource type="PackedScene" uid="uid://d1e2f3g4h5i6j" path="res://scenes/ui/initiative_bar/InitiativeBar.tscn" id="9_abcde"]

[node name="BattleScene" type="Node2D" node_paths=PackedStringArray("camera_2d")]
script = ExtResource("1_vd1me")
encounter_data = ExtResource("2_q8wks")
camera_2d = NodePath("Camera2D")

[node name="Camera2D" type="Camera2D" parent="."]
unique_name_in_owner = true
position = Vector2(576, 324)

[node name="BattleGrid" parent="." instance=ExtResource("2_t3o3d")]
position = Vector2(50, 50)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="InitiativeBar" parent="CanvasLayer" instance=ExtResource("9_abcde")]
anchor_left = 0.5
anchor_top = 0.0
anchor_right = 0.5
anchor_bottom = 0.0
offset_left = -288.0
offset_top = 24.0
offset_right = 288.0
offset_bottom = 84.0
grow_horizontal = 2
grow_vertical = 1

[node name="PlayerHandUI" parent="CanvasLayer" instance=ExtResource("3_rjp4h")]
offset_left = 188.0
offset_top = 496.0
offset_right = 996.0
offset_bottom = 624.0

[node name="EndTurnButton" type="Button" parent="CanvasLayer"]
offset_left = 1032.0
offset_top = 106.0
offset_right = 1128.0
offset_bottom = 146.0
text = "Ukončit tah"

[node name="VictoryLabel" type="Label" parent="CanvasLayer"]
visible = false
offset_top = 90.0
offset_right = 1152.0
offset_bottom = 738.0
theme_override_font_sizes/font_size = 50
text = "Výhra"
horizontal_alignment = 1
vertical_alignment = 1

[node name="EnergyLabel" type="Label" parent="CanvasLayer"]
offset_top = 448.0
offset_right = 112.0
offset_bottom = 488.0
theme_override_font_sizes/font_size = 25
text = "Energie:"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PlayerInfoPanel" parent="CanvasLayer" instance=ExtResource("4_t3o3d")]
offset_left = 8.0
offset_top = 488.0
offset_right = 128.0
offset_bottom = 632.0

[node name="EnemyInfoPanel" parent="CanvasLayer" instance=ExtResource("4_t3o3d")]
offset_left = 1040.0
offset_top = 488.0
offset_right = 1144.0
offset_bottom = 632.0

[node name="DrawPileButton" parent="CanvasLayer" instance=ExtResource("5_nabc4")]
unique_name_in_owner = true
offset_left = 1088.0
offset_top = 312.0
offset_right = 1136.0
offset_bottom = 376.0

[node name="DiscardPileButton" parent="CanvasLayer" instance=ExtResource("5_nabc4")]
unique_name_in_owner = true
offset_left = 1088.0
offset_top = 392.0
offset_right = 1136.0
offset_bottom = 456.0

[node name="CardPileViewer" parent="CanvasLayer" instance=ExtResource("6_q8wks")]
unique_name_in_owner = true
visible = false
modulate = Color(1, 1, 1, 0.784314)
self_modulate = Color(1, 1, 1, 0.784314)
offset_left = 64.0
offset_top = 64.0
offset_right = 1024.0
offset_bottom = 448.0

[node name="WinButton" type="Button" parent="CanvasLayer"]
offset_left = 1032.0
offset_top = 162.0
offset_right = 1124.0
offset_bottom = 183.0
text = "Okamžitá výhra"

[node name="TurnCounterLabel" type="Label" parent="CanvasLayer"]
offset_left = 1032.0
offset_top = 202.0
offset_right = 1128.0
offset_bottom = 250.0
theme_override_font_sizes/font_size = 24
text = "Tah: 1"
horizontal_alignment = 1
vertical_alignment = 1

[node name="DevConsole" parent="." instance=ExtResource("8_5282s")]
visible = false

[connection signal="pressed" from="CanvasLayer/EndTurnButton" to="." method="_on_end_turn_button_pressed"]
